# Initial beliefs.
#***(~hasItems(location(1)),0.9).
#***(hasItems(location(2)),0.8).
#***(hasItems(location(3)),0.7).

***(water_or_ice(location(2)),0.85).
***(water_or_ice(location(1)),0.9).
***(~water_or_ice(location(3)),0.5).
***(water_or_ice(location(2)),0.35).
***(water_or_ice(location(5)),0.5).
***(water_or_ice(location(6)),0.4).
***(water_or_ice(location(7)),0.3).
***(~water_or_ice(location(8)),0.2).
***(~water_or_ice(location(9)),0.1).
**(at(location(1)),0).
**(at(location(2)),0).
**(at(location(3)),0).
**(at(location(4)),0).
**(at(location(5)),0).
**(at(location(6)),0).
**(at(location(7)),0).
**(at(location(8)),0).
**(at(location(9)),0).
**(carrying(water),0).

#**(analysisAgent(location(,)), 1).

# Initial goals.
!exploreMars.
#!completeMission.

# Plan library.
#+!exploreMars : (water_or_ice(location(Y)) || water_or_ice(location(Y1))) &&
#                water_or_ice(location(X)) > water_or_ice(location(Y)) && water_or_ice(location(X)) > water_or_ice(location(Y1)) &&
#                water_or_ice(location(X)) > water_or_ice(location(Y2)) &&
#                X \== Y && X \== Y1 && X \== Y2 &&
#                Y \== Y1 && Y \== Y2 &&
#                Y1 \== Y2 <- travel(location(X)); scanWater(location(X)).

+!exploreMars : water_or_ice(location(X)) > water_or_ice(location(Y)) && water_or_ice(location(X)) > water_or_ice(location(Y1)) &&
                X \== Y && X \== Y1 &&
                Y \== Y1 <- !findWater(location(X)).

+!findWater(location(X)) : water_or_ice(location(Z)) > water_or_ice(location(X)) && Z \== X <- !findWater(location(Z)).

+!findWater(location(X)) : water_or_ice(location(Z)) <= water_or_ice(location(X)) && Z \== X <- travel(location(X)).

*(water_or_ice(location(X,Y)), 1) : true <- travel(location(X,Y)); collectSample(water); *(water_or_ice(location(X,Y)), 0).

*(carrying(water),1) : true <- travel(location(7,7)).

#+!exploreMars : water_or_ice(location(X)) > water_or_ice(location(Y)) && X \== 4 <- print(X,Y).
#+!exploreMars : water_or_ice(location(X)) > water_or_ice(location(Y)) && water_or_ice(location(X)) > water_or_ice(location(Y1)) &&
#                water_or_ice(location(X)) > water_or_ice(location(Y2)) && water_or_ice(location(X)) > water_or_ice(location(Y3)) &&
#                X \== Y && X \== Y1 && X \== Y2 && X \== Y3 &&
#                Y \== Y1 && Y \== Y2 && Y \== Y3 &&
#                Y1 \== Y2 <- print(location(X),location(Y)).

#+!exploreMars : water_or_ice(location(X)) >= water_or_ice(location(Y)) && water_or_ice(location(X)) >= water_or_ice(location(Y1)) &&
#                water_or_ice(location(X)) >= water_or_ice(location(Y2)) && water_or_ice(location(X)) >= water_or_ice(location(Y3)) &&
#                water_or_ice(location(X)) >= water_or_ice(location(Y4)) && water_or_ice(location(X)) >= water_or_ice(location(Y5)) &&
#                X \== Y && X \== Y1 && X \== Y2 && X \== Y3 && X \== Y4 && X \== Y5 &&
#                Y \== Y1 && Y \== Y2 && Y \== Y3 && Y \== Y4 && Y \== Y5 &&
#                Y1 \== Y2 && Y1 \== Y3 && Y1 \== Y4 && Y1 \== Y5 &&
#                Y2 \== Y3 && Y2 \== Y4 && Y2 \== Y5 &&
#                Y3 \== Y4 && Y3 \== Y5 &&
#                Y4 \== Y5 <- print(location(X),location(Y)).

#+!exploreMars : water_or_ice(location(X)) > water_or_ice(location(Y)) && water_or_ice(location(X)) > water_or_ice(location(Y1)) &&
#                water_or_ice(location(X)) > water_or_ice(location(Y2)) && water_or_ice(location(X)) > water_or_ice(location(Y3)) &&
#                water_or_ice(location(X)) > water_or_ice(location(Y4)) && water_or_ice(location(X)) > water_or_ice(location(Y5)) &&
#                water_or_ice(location(X)) > water_or_ice(location(Y6)) && water_or_ice(location(X)) > water_or_ice(location(Y7)) &&
#                X \== Y && X \== Y1 && X \== Y2 && X \== Y3 && X \== 4 && X \== Y5 && X \== Y6 && X \== Y7  <- print(location(X),location(Y)).

#+!completeMission : at(location(X)) >= at(location(Y)) && at(location(X)) >= at( location(Z)) && at(location(X)) >= at(location(4)) &&
#                    X \== 4 && X \== Y && X \== Z && Y \== Z && Y \== 4 <- !proceed(location(X),location(Y)).

#+!completeMission : at(location(X)) > at(location(Y)) && at(location(X)) > at( location(Z)) && at(location(X)) > at(location(4)) &&
#                    hasItems(location(Y)) > hasItems(location(Z)) &&
#                    X \== 4 && X \== Y && X \== Z && Y \== Z <- !proceed(location(X),location(Y)).

#+!completeMission : at(location(X)) >= at(location(Y)) && at(location(X)) >= at( location(Z)) && at(location(X)) >= at(location(4)) &&
#                    (hasItems(location(Y)) || hasItems(location(Z))) && hasItems(location(Y)) >= hasItems(location(Z)) &&
#                    sufficientBattery(location(X),location(Y),location(4)) && X \== 4 && X \== Y && X \== Z && Y \== Z <- !proceed(location(X),location(Y)).
#+!completeMission : at(location(X)) >= at(location(Y)) && at(location(X)) >= at( location(Z)) && at(location(X)) >= at(location(4)) && (hasItems(location(Y)) || hasItems(location(Z))) && hasItems(location(Y)) >= hasItems(location(Z)) && ~sufficientBattery(location(X),location(Y),location(4)) && X \== 4 && X \== Y && X \== Z && Y \== Z <- broadcast(try(location(Y))); !proceed(location(X),location(4)) .
#+!completeMission : at(location(X)) >= at(location(Y)) && at(location(X)) >= at( location(Z)) && at(location(X)) >= at(location(4)) && ~hasItems(location(Y)) && ~hasItems(location(Z)) && X \== 4 && X \== Y && X \== Z && Y \== Z <- !proceed( location(X),location(4)).
#+!completeMission : at(location(4)) >= at(location(X)) && at(location(4)) >= at( location(Y)) && at(location(4)) >= at(location(Z)) && X \== 4 && Y \== 4 && Z \== 4 && X \== Y && X \== Z && Y \== Z <- depositItems.

#+!proceed(location(X),location(Y)) : true <- collectItems; *(~hasItems(location(X)) ,1); *(hasItems(location(X)),0); !travel(location(X),location(Y)); ! completeMission.
#+!travel(location(X),location(Y)) : true <- *(at(location(X)),0.01); *(at(location(Y)) ,0.99).